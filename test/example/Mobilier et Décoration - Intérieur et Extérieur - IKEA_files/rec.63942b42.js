!function(a){function e(e){for(var t,n,i=e[0],o=e[1],r=e[2],c=0,s=[];c<i.length;c++)n=i[c],p[n]&&s.push(p[n][0]),p[n]=0;for(t in o)Object.prototype.hasOwnProperty.call(o,t)&&(a[t]=o[t]);for(h&&h(e);s.length;)s.shift()();return d.push.apply(d,r||[]),u()}function u(){for(var e,t=0;t<d.length;t++){for(var n=d[t],i=!0,o=1;o<n.length;o++){var r=n[o];0!==p[r]&&(i=!1)}i&&(d.splice(t--,1),e=l(l.s=n[0]))}return e}var n={},p={1:0},d=[];function l(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.e=function(r){var e,t=[],n=p[r];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise(function(e,t){n=p[r]=[e,t]});t.push(n[2]=i);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=l.p+""+({0:"category-recommendations"}[e=r]||e)+"."+{0:"85af37e3"}[e]+".js",o=function(e){c.onerror=c.onload=null,clearTimeout(s);var t=p[r];if(0!==t){if(t){var n=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src,o=new Error("Loading chunk "+r+" failed.\n("+n+": "+i+")");o.type=n,o.request=i,t[1](o)}p[r]=void 0}};var s=setTimeout(function(){o({type:"timeout",target:c})},12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(t)},l.m=a,l.c=n,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(n,i,function(e){return t[e]}.bind(null,i));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="https://www.ikea.com/fr/fr/recommendations/recently-viewed/",l.oe=function(e){throw console.error(e),e};var t=window.webpackJsonpRecentlyViewed=window.webpackJsonpRecentlyViewed||[],i=t.push.bind(t);t.push=e,t=t.slice();for(var o=0;o<t.length;o++)e(t[o]);var h=i;d.push([41,2]),u()}([,,,,,,function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return r}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return a}),n.d(t,"e",function(){return u});var i="PIP_CART_ADD_SUCCESS",o="PIP_CART_ADD_FAIL",r="PIP_CART_ADD_PRODUCT",c=!1,s=function(){return new Promise(function(e,t){c&&e();var n=6,i=setInterval(function(){if(window.rangeEvent)return c=!0,clearTimeout(i),e();0===--n&&(clearTimeout(i),t(Error("window.rangeEvent was not found after ".concat(n," retries (").concat(3e3," ms)"))))},500)})},a=function(e,t){window.rangeEvent.subscribe(e,t)},u=function(e,t){window.rangeEvent.dispatch(e,t)}},function(e,t,n){"use strict";var i=function(e){try{window.sendEvent(e)}catch(e){}},o=function(t,i){return function(n){var e=Object.keys(i).reduce(function(e,t){return void 0===n[t]?e.concat(t):e},[]);return!e.length||(console.error("Missing keys in object [".concat(t,"]: ").concat(e)),!1)}},r=o("addToCart",{currency:!0,id:!0,price:!0,quantity:!0,composition:!0,index:!0}),c=function(e){r(e)&&i({event_label:"pip-post-purchase-addon | ".concat(e.composition),name:"add_to_cart",params:{currency:e.currency,items:[{id:e.id,price:e.price,quantity:e.quantity,list_click_position:e.index}]}})},s={event_category:"pip_page_actions",event_action:"add_to_cart_popup_action",event_label:"add_to_cart_recommendations",transport_type:"beacon",custom:{version:"ikea_rec"}},a={event_action:"link_clicks",event_label:"recently_viewed_recommendations",transport_type:"beacon",custom:{version:"ikea_rec"}},u=o("productClick",{id:!0,composition:!0,type:!0,index:!0}),p=function(e){u(e)&&i(Object.assign(s,{event_label:"product_click | ".concat(e.type),custom:{version:"ikea_rec",item_number_event:e.id,technical_component:"".concat(e.composition),position:e.index}}))},d=o("addToCart",{composition:!0}),l=function(t){return function(e){d(e)&&i(Object.assign(s,{event_label:t,custom:{version:"ikea_rec",technical_component:"".concat(e.composition)}}))}},h=o("recentlyViewedProductClick",{event_category:!0}),f=function(e){h(e)&&i(Object.assign(a,{event_category:e.event_category}))};t.a={addToCart:c,productClick:p,closePopup:{cancel:l("close_cancel"),cross:l("close_x"),overlay:l("close_overlay")},openPopup:l("open_popup"),cartLink:l("cart_link_click"),recentlyViewedProductClick:f}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return p}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return h}),n.d(t,"g",function(){return v});var i,o=n(10),r=n.n(o),c=n(14),s=n.n(c),a="15281290236",u="15275410240",p="15274960480",d="15256790298",l="15244830210",h="15272560118",f={oldPopup:!0,waitTime:0,showConfirmation:!1,optimisticPopup:!0,display:!0},m=(i={default:f},r()(i,u,f),r()(i,h,s()({},f,{oldPopup:!1,display:!1})),r()(i,p,s()({},f,{waitTime:1e3,optimisticPopup:!1,oldPopup:!1})),r()(i,d,s()({},f,{waitTime:0,optimisticPopup:!1,showConfirmation:!0,oldPopup:!1})),r()(i,l,s()({},f,{optimisticPopup:!0,waitTime:0,showConfirmation:!0,oldPopup:!1})),i),v=function(e){return m[e]||m.default}},,,,,,,function(e,t,n){"use strict";t.a=function(e){return fetch("https://rec.ingka.com/recommendations/v1/es-prod/items/addtocart".concat("/"+e)).then(function(e){if(e.ok)return e}).then(function(e){return e.json()})}},,,function(e,t){e.exports=function(e,t){var n=!1;return function(){n||(e(),n=!0,setTimeout(function(){n=!1},t))}}},,function(e,t,n){"use strict";n.r(t);var i=n(1),o=n.n(i),r=n(2),c=n.n(r),s=n(3),a=n.n(s),u=n(4),p=n.n(u),d=n(5),l=n.n(d),h=n(9),f=n.n(h),m=n(13),v=n.n(m),b=n(0),y=(n(26),n(17)),g=n.n(y),w=n(18),O=n.n(w),_=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=/{([a-zA-Z0-9]*)}/,i=e,o=n.exec(i);o;){var r=o[1],c=t[r]||"";i=i.replace(new RegExp("{".concat(r,"}"),"g"),c),o=n.exec(i)}return i},k=(n(30),n(11)),j=n.n(k),C=n(16),x=n.n(C),E=function(e){function t(){return o()(this,t),a()(this,p()(t).apply(this,arguments))}return l()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.prefix,n=e.icon,i=e.disabled,o=e.className,r=e.onClick,c=e.loading,s=x()("".concat(t,"btn"),"".concat(t,"btn--icon"),c?"".concat(t,"btn--loading"):null,"".concat(t,"trailing-icon"),o);return Object(b.d)("button",{className:s,onClick:r,disabled:i},Object(b.d)("span",{className:"".concat(t,"btn__icon-bg")}),Object(b.d)("span",{className:"".concat(t,"btn__copy")},n),c&&Object(b.d)(j.a,{prefix:"rec-"}))}}]),t}(b.a),N=Object(b.d)("svg",{className:"rec-popup-svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(b.d)("path",{"fill-rule":"evenodd",d:"M17.597 5l-5.592 5.592L6.414 5 5 6.415l5.591 5.591L5 17.597l1.414 1.414 5.591-5.592 5.592 5.592 1.414-1.414-5.592-5.591 5.592-5.591z"})),P=(Object(b.d)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(b.d)("path",{d:"M12 4C9.2 4 7 6.2 7 9H2l3 11h14l3-11h-5c0-2.8-2.2-5-5-5zm0 2c1.7 0 3 1.3 3 3H9c0-1.7 1.3-3 3-3zm5.5 12h-11l-1.9-7h14.8l-1.9 7z"})),Object(b.d)("svg",{className:"rec-popup-svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(b.d)("g",{fill:"none","fill-rule":"evenodd"},Object(b.d)("path",{fill:"#0A8A00",d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10z"}),Object(b.d)("path",{fill:"#FFF",d:"M10.873 13.478l-3.41-3.657L6 11.185l4.832 5.066 7.28-6.788L16.746 8z",class:"white"})))),S=Object(b.d)("svg",{className:"rec-popup-svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(b.d)("path",{"fill-rule":"evenodd",d:"M10.5 15.6l-4.8-5.3-1.4 1.4 6.2 6.7L20.7 8.2l-1.4-1.4z"})),L=Object(b.d)("svg",{className:"rec-popup-svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(b.d)("path",{"fill-rule":"evenodd",d:"M20 14v2h2v2h-2v2h-2v-2h-2v-2h2v-2h2zM12 4c2.8 0 5 2.2 5 5h5l-1 4h-2.1l.5-2H4.6l1.9 7H15v2H5L2 9h5c0-2.8 2.2-5 5-5zM9 9h6c0-1.7-1.3-3-3-3S9 7.3 9 9z"})),I=n(7),T=n(6),z=function(t){return function(e){return Object(T.f)(t,e)}},A={submit:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;Object(T.e)([T.b],{itemNo:e,itemType:t,quantity:n})},onInit:z(T.b),onSuccess:z(T.c),onError:z(T.a)},M=function(e){function n(e){var t;return o()(this,n),(t=a()(this,p()(n).call(this,e))).state={loading:!1,success:!1,error:!1},t}return l()(n,e),c()(n,[{key:"handleClick",value:function(){var e="s"===this.props.id[0]?"SPR":"ART";this.setState({loading:!0}),A.submit(this.props.id,e),this.sendAddToCartEvent()}},{key:"sendAddToCartEvent",value:function(){I.a.addToCart({currency:this.props.currency,id:this.props.id,price:this.props.price,quantity:1,composition:this.props.composition,index:this.props.index})}},{key:"handleSuccess",value:function(e,t){t.itemNo===this.props.id&&(this.setState({loading:!1,success:!0}),this.resetButtonState(1500))}},{key:"handleError",value:function(){this.setState({loading:!1,error:!0}),this.resetButtonState(3e3)}},{key:"resetButtonState",value:function(e){var t=this;setTimeout(function(){return t.setState({loading:!1,success:!1,error:!1})},e)}},{key:"componentDidMount",value:function(){A.onSuccess(this.handleSuccess.bind(this)),A.onError(this.handleError.bind(this))}},{key:"getButtonClassList",value:function(){var e="rec-compact-buy-button",t="".concat(e," ").concat(e,"--default-background");return this.state.success?t+=" ".concat(e,"--success"):this.state.error&&(t+=" ".concat(e,"--error")),t}},{key:"getButtonIcon",value:function(){return this.state.success?S:this.state.error?N:L}},{key:"render",value:function(){var e=this.getButtonClassList(),t=this.getButtonIcon();return Object(b.d)(E,{prefix:"rec-popup-",className:e,icon:t,onClick:this.handleClick.bind(this),loading:this.state.loading})}}]),n}(b.a),D=function(){return Object(b.d)("svg",{className:"rec-popup-product__icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Object(b.d)("circle",{"clip-rule":"evenodd",cx:"12",cy:"12",fill:"#ffa524","fill-rule":"evenodd",r:"10"}),Object(b.d)("circle",{cx:"12",cy:"16",r:"1"}),Object(b.d)("path",{d:"m11 7h2v7h-2z"}))},R=function(n){return function(e){var t=document.createElement("div");return t.innerHTML=n,e.forEach(function(e){t.firstChild.setAttribute(e.name,e.value)}),t.innerHTML}},B=function(e){var t=e.className,n=void 0===t?"":t,i=e.base,o=void 0===i?12:i,r=e.sm,c=void 0===r?12:r,s=e.md,a=void 0===s?12:s,u=e.lg,p=void 0===u?12:u;return"".concat(n," rec-popup-ikea-col-").concat(o," rec-popup-ikea-col-sm-").concat(c," rec-popup-ikea-col-md-").concat(a," rec-popup-ikea-col-lg-").concat(p)},H=function(e,t){for(var n=e;n;){if(n.matches&&n.matches(t))return n;n=n.parentNode}return null},q=function(e){return"mustBeCompletedWith"===e.type?Object(b.d)(D,null):null},W=function(e){var i,o,r,t=e.composition,n=e.fragment,c=e.index,s=e.itemId,a=e.type,u=c+1,p=R(n)([{name:"data-list-position",value:u},{name:"data-recommendations-type",value:"add_to_cart_recommendations"}]);return Object(b.d)("div",{key:"product-".concat(s),className:"rec-popup-product__fragment",dangerouslySetInnerHTML:{__html:p},onClick:(i=t,o=u,r=a,function(e){var t=H(e.target,"a");if(t){var n=t.parentNode.parentNode.dataset.refId;I.a.productClick({id:"s"===n[0]?n.substring(1):n,composition:i,index:o,type:r})}})})},F=function(e){function t(){return o()(this,t),a()(this,p()(t).apply(this,arguments))}return l()(t,e),c()(t,[{key:"componentDidMount",value:function(){var e=document.createElement("div");e.innerHTML=this.props.fragment;var t=e.children[0].dataset,n=t.price,i=t.currency;this.price=n?Number(n):0,this.currency=i||"UNDEFINED_CURRENCY"}},{key:"render",value:function(){var e=this.props,t=e.fragment,n=e.itemId,i=e.type,o=e.index,r=B({className:"rec-popup-product",base:5,sm:5,md:3,lg:2});return Object(b.d)("li",{className:r},Object(b.d)(q,{type:i}),Object(b.d)(W,{composition:this.props.composition,fragment:t,index:o,itemId:n,type:i}),Object(b.d)(M,{id:n,currency:this.currency,price:this.price,composition:this.props.composition,index:o}))}}]),t}(b.a),U={productCare:"Votre {Name} restera comme neuf avec",getsSaferWith:"Renforcez la sécurité de votre {name}",goesWellWith:"Votre {name} va très bien avec ",mustBeCompletedWith:"Pour utiliser votre {name}, vous aurez aussi besoin de"},K=function(e){function n(e){var t;return o()(this,n),(t=a()(this,p()(n).call(this,e))).state={shouldScrollList:!0},t}return l()(n,e),c()(n,[{key:"renderHeading",value:function(){var t=[];this.props.recommendations.forEach(function(e){-1===t.indexOf(e.type)&&t.push(e.type)});var e=1<t.length?"Complétez votre {name} par ces produits ":U[t[0]];return _(e,{name:this.props.productName})}},{key:"renderProduct",value:function(e,t){var n=e.fragment,i=e.itemId,o=e.type;return Object(b.d)(F,{fragment:n,itemId:i,type:o,index:t,productCount:this.props.recommendations.length,composition:this.props.composition})}},{key:"handleResize",value:function(){var e=this.slider&&this.slider.offsetWidth<this.slider.scrollWidth;!this.state.shouldScrollList&&e?this.setState({shouldScrollList:!0}):this.state.shouldScrollList&&!e&&this.setState({shouldScrollList:!1})}},{key:"addResizeListener",value:function(){var e=O()(this.handleResize.bind(this),100);window.addEventListener("resize",e),window.addEventListener("orientationchange",e)}},{key:"componentDidMount",value:function(){this.addResizeListener(),this.handleResize()}},{key:"componentDidUpdate",value:function(){var e=this;requestAnimationFrame(function(){e.handleResize()})}},{key:"sortRecommendations",value:function(){for(var e=g()(this.props.recommendations),t=[],r={goesWellWith:1,productCare:2,getsSaferWith:3,mustBeCompletedWith:4},n=function(){var n=-1,i=null,o=-1;e.forEach(function(e,t){r[e.type]>=n&&(n=r[(i=e).type],o=t)}),t.push(i),e.splice(o,1)};e.length;)n();return t}},{key:"render",value:function(){var t=this,e=this.sortRecommendations(),n=this.state.shouldScrollList?"rec-popup-product-slider":"rec-popup-product-slider rec-popup-product-slider--center-list";return Object(b.d)("div",{className:"rec-popup-content"},Object(b.d)("h4",{className:"rec-popup-title"},this.renderHeading()),Object(b.d)("ul",{className:n,ref:function(e){t.slider=e}},e.map(this.renderProduct.bind(this))))}}]),n}(b.a),V=(n(38),function(e){function t(e){return o()(this,t),a()(this,p()(t).call(this,e))}return l()(t,e),c()(t,[{key:"render",value:function(){return Object(b.d)("div",{className:"rec-confirmation-wrapper"},this.props.loading?Object(b.d)("div",{className:"rec-confirmation-spinner"},Object(b.d)(j.a,{prefix:"rec-"})):Object(b.d)("div",{className:"rec-confirmation"},Object(b.d)("div",{className:"rec-confirmation-icon"},P),Object(b.d)("span",{className:"rec-confirmation-label"},"Ajouté au chariot")))}}]),t}(b.a)),G=function(e){function t(){return o()(this,t),a()(this,p()(t).apply(this,arguments))}return l()(t,e),c()(t,[{key:"escFunction",value:function(e){27===e.keyCode&&this.close("esc")}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"componentDidUpdate",value:function(e,t){!e.isOpen&&this.props.isOpen&&this.onOpen()}},{key:"onOpen",value:function(){document.addEventListener("keydown",this.escFunction.bind(this),!1),this._firstElement&&this._firstElement.focus(),I.a.openPopup({composition:this.props.composition})}},{key:"close",value:function(e){var t={cross:I.a.closePopup.cross,cancel:I.a.closePopup.cancel,overlay:I.a.closePopup.overlay,esc:function(){}};document.removeEventListener("keydown",this.escFunction,!1),t[e]({composition:this.props.composition}),this.props.handleClose()}},{key:"handleKeyDown",value:function(e){var t=9===e.keyCode,n=e.shiftKey,i=e.target===this._firstElement,o=e.target===this._lastElement;t&&(i&&n?(e.preventDefault(),this._lastElement.focus()):o&&!n&&(e.preventDefault(),this._firstElement.focus()))}},{key:"render",value:function(){var t=this,e="rec-popup-wrapper";this.props.isOpen&&(e+=" rec-popup-wrapper--open");var n="rec-popup-overlay ".concat(this.props.isOpen?"rec-popup-overlay--open":""),i="rec-popup";this.props.isOpen&&(i+=" rec-popup--open");var o="rec-popup-top-bar";return this.props.showConfirmation&&(o+=" rec-popup-top-bar--confirmation"),Object(b.d)("div",{className:e},Object(b.d)("div",{className:n,onClick:this.close.bind(this,"overlay")}),Object(b.d)("div",{"aria-hidden":!this.props.isOpen,className:i},Object(b.d)("div",{className:"rec-popup-top"},Object(b.d)("div",{className:o},this.props.showConfirmation?Object(b.d)(V,{loading:this.props.loading}):"",Object(b.d)("button",{ref:function(e){t._firstElement=e},onKeyDown:this.handleKeyDown.bind(this),className:"rec-popup-x-button",onClick:this.close.bind(this,"cross")},Object(b.d)("svg",{viewBox:"0 0 24 24",class:"rec-popup-svg-icon rec-popup-svg-icon--150"},Object(b.d)("path",{"fill-rule":"evenodd",d:"M17.597 5l-5.592 5.592L6.414 5 5 6.415l5.591 5.591L5 17.597l1.414 1.414 5.591-5.592 5.592 5.592 1.414-1.414-5.592-5.591 5.592-5.591z"})))),Object(b.d)(K,{productName:this.props.productName,recommendations:this.props.recommendations,composition:this.props.composition,loading:this.props.loading}),Object(b.d)("div",{tabIndex:"0",ref:function(e){t._lastElement=e},onFocus:function(){t._firstElement.focus()},className:"rec-popup-tab-trap"}))))}}]),t}(b.a),J=n(19),$=n.n(J),X=(n(39),function(e){function t(){return o()(this,t),a()(this,p()(t).apply(this,arguments))}return l()(t,e),c()(t,[{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen?this.onOpen():e.isOpen&&!this.props.isOpen&&this.onClose()}},{key:"onOpen",value:function(){this.prevFocus=document.activeElement,this.firstElement.focus()}},{key:"onClose",value:function(){this.prevFocus.focus()}},{key:"handleDialogKeyDown",value:function(e){if(!(e.ctrlKey||e.metaKey||e.altKey))if(27===e.which)this.props.handleClose();else if(9===e.which){var t=$()(this.element),n=t[0],i=t[t.length-1],o=!1;e.shiftKey&&e.target===n?(i.focus(),o=!0):e.target===i&&(n.focus(),o=!0),o&&e.preventDefault()}}},{key:"renderLoadingButton",value:function(){return Object(b.d)("div",{class:"rec-popup-btn rec-popup-btn--filled rec-popup-trailing-icon"},Object(b.d)(j.a,{light:!0,prefix:"rec-"}))}},{key:"renderCartButton",value:function(){return Object(b.d)("a",{href:"https://order.ikea.com/es/es/checkout/shoppingbag/",class:"rec-popup-btn rec-popup-btn--filled rec-popup-leading-icon"},Object(b.d)("span",{class:"rec-popup-btn__copy"},Object(b.d)("shoppingBag",null),Object(b.d)("svg",{viewBox:"0 0 24 24",class:"rec-popup-svg-icon rec-popup-btn__icon"},Object(b.d)("path",{d:"M12 4C9.2 4 7 6.2 7 9H2l3 11h14l3-11h-5c0-2.8-2.2-5-5-5zm0 2c1.7 0 3 1.3 3 3H9c0-1.7 1.3-3 3-3zm5.5 12h-11l-1.9-7h14.8l-1.9 7z"})),Object(b.d)("span",{class:"rec-popup-btn__label rec-popup-btn__label--after-icon"},"Voir mon panier")))}},{key:"render",value:function(){var t=this,e="rec-old-popup-wrapper";return this.props.isOpen&&(e+=" rec-old-popup-wrapper--open"),Object(b.d)("div",{className:e},Object(b.d)("div",{onClick:this.props.handleClose.bind(this),className:"rec-old-popup-overlay"}),Object(b.d)("div",{className:"rec-old-popup",onKeyDown:this.handleDialogKeyDown.bind(this),role:"dialog",ref:function(e){t.element=e}},Object(b.d)("button",{ref:function(e){t.firstElement=e},onClick:this.props.handleClose.bind(this),className:"rec-old-popup-x-button"},Object(b.d)("svg",{viewBox:"0 0 24 24",class:"rec-popup-svg-icon rec-popup-svg-icon--150"},Object(b.d)("path",{"fill-rule":"evenodd",d:"M17.597 5l-5.592 5.592L6.414 5 5 6.415l5.591 5.591L5 17.597l1.414 1.414 5.591-5.592 5.592 5.592 1.414-1.414-5.592-5.591 5.592-5.591z"}))),Object(b.d)("p",{"aria-live":"assertive",className:"rec-old-popup-text"},"Article ajouté à votre panier"),this.props.loading?this.renderLoadingButton():this.renderCartButton()))}}]),t}(b.a)),Y=n(8),Z=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},Q=function(i){return new Promise(function(n){window.optimizely=window.optimizely||[];var e=Z("force_rec_campaign")||null;if(e)return n(e);if(window.optimizely.get){var t=window.optimizely.get("state").getVariationMap()[i];if(t)return n(t.id)}window.recEvent.subscribe("REC_CAMPAIGN_DECIDED",function(e,t){if(t.data.decision.experimentId===i)return n(t.data.decision.variationId)})})},ee=n(15),te=Object({baseUrl:"https://www.ikea.com",locale:"fr-FR",siteFolder:"fr/fr",categoriesAPIUrl:"https://retail.api.ikea.com/recommendations/v1/fr-prod/categories/%category_id%/fr",addToCartAPIUrl:"https://rec.ingka.com/recommendations/v1/es-prod/items/addtocart",cartPageUrl:"https://order.ikea.com/es/es/checkout/shoppingbag/",enableContextualImages:!1,enableCategoryRecommendations:!1,enableCartRecommendations:!1,isLocalEnvionment:!1}),ne=te.baseUrl,ie=te.siteFolder,oe=function(e){var t=e.substr(e.length-3),n="".concat(ne,"/").concat(ie,"/products/").concat(t,"/").concat(e,"-compact-fragment.html");return fetch(n,{method:"GET",mode:"cors"}).then(function(e){return e.text()}).then(function(e){return o=e,new Promise(function(e,t){var n=document.createElement("div");n.innerHTML=o;var i=n.firstChild;"product-missing"===i.className&&t(Error("product missing!")),null!==i.innerHTML&&void 0!==i.innerHTML?e(i.outerHTML):t(Error("product missing!"))});var o})},re=function(e){return e.filter(function(e){return e.fragment})},ce=function(e){return e.filter(function(e){return"mayBeCompletedWith"!==e.type})},se=function(e){return(t=e,n=t.map(function(t){return oe(t.itemId).then(function(e){return{fragment:e,itemId:t.itemId,type:t.type}}).catch(function(){return{fragment:null,itemId:t.itemId,type:t.type}})}),Promise.all(n)).then(re).then(ce);var t,n};n.d(t,"run",function(){return pe}),n.d(t,"AddToCart",function(){return de});var ae=document.querySelector(".js-product-pip[data-product-id]"),ue=document.querySelector(".js-sticky-bottom-bar"),pe=function(){var e=v()(f.a.mark(function e(){var t,n,i,o;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ae)return t=ae.dataset.productId,e.next=4,Object(ee.a)(t);e.next=8;break;case 4:n=e.sent,i=n&&n.data&&n.data.recommended,o=document.querySelector("[data-test-target-product-name]").innerHTML,Object(b.f)(Object(b.d)(de,{productId:t,productName:o,recommendations:i}),ue);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),de=function(e){function n(e){var t;return o()(this,n),(t=a()(this,p()(n).call(this,e))).state={waitTime:0,recommendations:[],composition:"",isOpen:!1,loading:!1,optimisticPopup:!0,showConfirmation:!1,oldPopup:!0,display:!0},t}return l()(n,e),c()(n,[{key:"enrichRecommedations",value:function(){var i=this;se(this.props.recommendations).then(function(e){var t,n=(t={mustBeCompletedWith:"m",getsSaferWith:"s",productCare:"c",goesWellWith:"y"},e.map(function(e){return t[e.type]||"?"}));i.setState({recommendations:e,composition:n})})}},{key:"open",value:function(){var e=this;setTimeout(function(){e.setState({isOpen:!0})},this.state.waitTime)}},{key:"awaitVariation",value:function(){var s=this;Q(Y.a).then(function(e){var t=Object(Y.g)(e),n=t.waitTime,i=t.optimisticPopup,o=t.display,r=t.showConfirmation,c=t.oldPopup;s.setState({waitTime:n,optimisticPopup:i,display:o,showConfirmation:r,oldPopup:c})})}},{key:"onInit",value:function(){this.state.optimisticPopup&&this.state.display&&(this.setState({loading:!0}),this.open())}},{key:"onSuccess",value:function(){this.setState({loading:!1}),!this.state.optimisticPopup&&this.state.display&&this.open()}},{key:"onError",value:function(){this.state.oldPopup&&this.setState({loading:!1,isOpen:!1})}},{key:"addTrigger",value:function(){var e=this;Object(T.d)().then(function(){A.onInit(e.onInit.bind(e)),A.onSuccess(e.onSuccess.bind(e)),A.onError(e.onError.bind(e))})}},{key:"componentDidMount",value:function(){this.awaitVariation(),this.enrichRecommedations(),this.addTrigger()}},{key:"close",value:function(){this.setState({isOpen:!1})}},{key:"render",value:function(){return this.state.recommendations.length?this.state.oldPopup?Object(b.d)(X,{isOpen:this.state.isOpen,handleClose:this.close.bind(this),loading:this.state.loading}):Object(b.d)(G,{showConfirmation:this.state.showConfirmation,waitTime:this.state.waitTime,recommendations:this.state.recommendations,composition:this.state.composition,productName:this.props.productName,isOpen:this.state.isOpen,handleClose:this.close.bind(this),loading:this.state.loading}):""}}]),n}(b.a)},,,,,,function(e,t,n){},,,,function(e,t,n){},,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(9),o=n.n(i),r=n(13),c=n.n(r),m=n(7),s=function(){var u=document.querySelector("[data-recently-viewed]"),r="ikeaBrowserHistory",c=8,s="start",a="plp",p="pip",d=null,l="";function h(e,t){var n=JSON.parse(e);if(Object.keys(n).length){var i=document.createElement("a");i.setAttribute("href",n.pipUrl),i.addEventListener("click",function(){m.a.recentlyViewedProductClick({event_category:{start:"start_page_actions",plp:"plp_page_actions",pip:"pip_page_actions"}[l]})},!1);var o,r,c,s,a=(o=n.mainImage.id,r=n.mainImage.alt,c="https://m2.ikea.com/PIAimages/".concat(o,"_S5.JPG"),(s=document.createElement("img")).classList.add("product-image"),s.setAttribute("src","".concat(c,"?f=xxs")),s.setAttribute("alt",r),s.setAttribute("sizes","(min-width: 1440px) 105px, (min-width: 768px) 12vw, (min-width: 480px) 23vw, 33vw"),s.setAttribute("srcset","".concat(c,"?f=xs 500w,").concat(c,"?f=xxs 400w,").concat(c,"?f=xxxs 300w")),s);i.appendChild(a),t.setAttribute("data-recommendations-type","recently_viewed"),t.appendChild(i),u.querySelector("section").classList.add("recently-viewed__visible"),function(){for(var e=d.querySelectorAll("[data-recommendations-type]"),t=e.length,n=0,i=t;n<i;n+=1)e[n].setAttribute("data-list-position",n+1);d.setAttribute("data-list-length",t)}()}else t.parentNode.removeChild(t)}function f(e,t,n){var i=e.substr(e.length-3),o="".concat("https://www.ikea.com","/").concat("fr/fr","/products/").concat(i,"/").concat(e,".json"),r=new XMLHttpRequest;r.open("GET",o),r.onload=function(){r.status<200||300<=r.status||""===r.response||"function"!=typeof n?t.parentNode.removeChild(t):n(r.response,t)},r.send()}function n(){if(""!==(l=function(){if("undefined"!=typeof utag_data&&void 0!==utag_data.page_type&&"home page"===utag_data.page_type)return s;var e=new RegExp("^/".concat("fr/fr","/(cat|p)/")).exec(window.location.pathname);return null===e||void 0===e[1]?"":"cat"===e[1]?a:"p"===e[1]?p:""}())){u.classList.remove("recently-viewed__lazy");var e=function(){var e=JSON.parse(localStorage.getItem(r)||"{}");if(!e.pip)return[];var t=e.pip;return t.reverse(),t.map(function(e){return e.id}).slice(0,c)}(),t=document.querySelector(".js-product-pip[data-product-id]");if(null!==t){var n=t.getAttribute("data-product-id").toLowerCase(),i=e.indexOf(n);if(-1<i&&e.splice(i,1),0===e.length)return}var o='<section class="js-recently-viewed recently-viewed"\n        data-namespace="recently-viewed">\n        <div class="recently-viewed__container">\n          <h4 class="recently-viewed__title">'.concat("Mes derniers articles vus",'</h4>\n          <ul class="recently-viewed__list"></ul>\n        </div>\n      </section>');u.innerHTML=o,d=u.querySelector("ul"),function(e){for(var t=0,n=e.length;t<n;t+=1){var i=document.createElement("li");d.appendChild(i),f(e[t],i,h)}}(e)}}null===document.querySelector("#section-recently-viewed")&&null!==u&&("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype?(u.classList.add("recently-viewed__lazy"),new IntersectionObserver(function(e,t){e.forEach(function(e){e.isIntersecting&&(n(),t.unobserve(e.target),t.disconnect())})},{root:null,rootMargin:"0px 0px 300px 0px",threshold:0}).observe(u)):n())},a=n(1),u=n.n(a),p=n(2),d=n.n(p),l=n(3),h=n.n(l),f=n(4),v=n.n(f),b=n(5),y=n.n(b),g=n(0),w=n(8),O=n(6),_=n(20),k=n(15),j=(document.querySelector(".js-dev-tools-mount-node"),[{label:"Old popup",variation:w.e},{label:"No popup",variation:w.b},{label:"Original with wait time",variation:w.f},{label:"No wait time",variation:w.c},{label:"Optimistic popup",variation:w.d}]),C=function(){Object(O.e)(O.b,{itemNo:"80342882"})},x=(g.a,function(){function e(){u()(this,e),this.subscriptions={}}return d()(e,[{key:"dispatch",value:function(t,n){if(!this.subscriptions[t])return null;this.subscriptions[t].forEach(function(e){e(t,n)})}},{key:"subscribe",value:function(e,t){this.subscriptions[e]?this.subscriptions[e].push(t):this.subscriptions[e]=[t]}}]),e}()),E=function(){window.optimizely=window.optimizely||[],window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:function(e){window.recEvent.dispatch("REC_CAMPAIGN_DECIDED",e)}})};n(40);window.recEvent=new x,E(),c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{window.addEventListener("load",c()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s(),e.next=6;break;case 4:e.sent.run();case 6:e.next=11;break;case 9:e.sent.run();case 11:case"end":return e.stop()}},e)})))}catch(e){console.error(e)}case 1:case"end":return e.stop()}},e)}))()}]);
//# sourceMappingURL=rec.63942b42.js.map